import{d as e,o as t,r as n,c as a,a as r,w as s,K as o,b as l,h as i,R as u,e as p,f as c,g as d,u as h,i as g,j as f,k as m,l as y,m as v,n as x,p as P,q as b,s as w,Q as k,t as S,v as $,x as _}from"./vendor.6c815512.js";const N="森",q="寻的碎碎念",I="https://innei.ren",L="https://api.innei.ren/graphql";var E=e({setup(){t((()=>{document.title=`${N} | ${q}`}))}});E.render=function(e,t,i,u,p,c){const d=n("router-view");return r(),a(d,null,{default:s((({Component:e})=>[(r(),a(o,{exclude:["note"]},[(r(),a(l(e)))],1024))])),_:1})};var T=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:E});let z;const O={};const C=e({setup:()=>()=>i("header",{class:"header-wrapper"},i(u,{to:"/"},i("h1",null,N,i("small",null,q))),i("div",{class:"links"},i(u,{to:"/about"},"About"),i("a",{href:I,target:"_blank"},"Website")))}),D=e({setup:()=>()=>{const e=(new Date).getFullYear();return i("a",{href:I},i("footer",{class:"text-text-gray font-serif text-xs pb-6 inline-block"},"Copyright © ",e," Innei. Powered by Vue 3."))}});var M=e({components:{Header:C,Footer:D}});const V={class:"wrap"};M.render=function(e,t,s,o,l,i){const u=n("Header"),d=n("Footer");return r(),a("div",V,[p(u),p("main",null,[c(e.$slots,"default")]),p(d)])};const W=new d.GraphQLClient(L,{});function F(e,t,n){const a=/\((@(\w+\b))\)\s(?!\[.*?\])/.exec(t);if(a){if(n)return!0;try{return e(a[0])({type:"link",url:"https://github.com/"+a[2],children:[{type:"text",value:a[1]}]})}catch{}}}function j(e,t,n){const a=/^\|\|([\s\S]+?)\|\|(?!\|)/.exec(t);if(a){if(n)return!0;try{return e(a[0])({type:"spoiler",value:a[1]})}catch{}}}F.notInLink=!0,F.locator=function(e,t){return e.indexOf("@",t)},j.notInLink=!0,j.locator=function(e,t){return e.indexOf("||",t)};const A={mentions:function(){const e=this.Parser,t=e.prototype.inlineTokenizers,n=e.prototype.inlineMethods;t.mention=F,n.splice(n.indexOf("text"),0,"mention")},spoiler:function(){const e=this.Parser,t=e.prototype.inlineTokenizers,n=e.prototype.inlineMethods;t.spoiler=j,n.splice(n.indexOf("text"),0,"spoiler")}};var H=Object.values(A);const J=h().use(g).use(f).use(H).use(m,{handlers:{spoiler:(e,t)=>e(t,"del",{class:"spoiler"},[{type:"text",value:t.value}])}}),R=e({name:"note",setup(){const e=P(),t=parseInt(e.params.id),n=y({note:{}});v((async()=>{n.note=await(async e=>{const t=d.gql`
    query getNoteContent($nid: Int) {
      getNoteById(nid: $nid) {
        data {
          title
          created
          modified
          text
          nid
          _id
        }
      }
    }
  `;return(await W.request(t,{nid:e})).getNoteById.data})(t),document.title=n.note.title+" | "+N}));const a=x((()=>{const e=new Date(n.note.created),t=e.getDate(),a=e.getMonth()+1;return`${e.getFullYear()}-${a.toString().padStart(2,"0")}-${t.toString().padStart(2,"0")}`}));return()=>i(M,null,n.note._id&&i("div",{class:"content-wrapper"},i("h1",null,n.note.title),i("div",{class:"time"},a.value),i("article",null,i("h1",{style:{display:"none"}},n.note.title),i("div",{innerHTML:J.processSync(n.note.text).toString()})),i("div",{class:"notice"},"Visit Full version:"," ",i("a",{href:`//innei.ren/notes/${n.note.nid}`,target:"_blank",rel:"noopener noreferrer"},"https://innei.ren/notes/",n.note.nid))))}});const G=e({props:{notes:{type:Array,required:!0,default:[]}},setup:e=>()=>i("ul",{class:"list-root"},e.notes.map((e=>{const t=new Date(e.created),n=t.getDate(),a=t.getMonth()+1;return i("li",{key:e._id},i(u,{to:`/notes/${e.nid}`},i("span",{class:"title"},e.title),i("span",{class:"created"},`${a}/${n}`)))})))});const Q=e({setup(){const e=b(!0),t=y({notes:[],pager:{hasNextPage:!1,hasPrevPage:!1,totalPage:1}}),n=P(),a=b(parseInt(n.query.page)||1);v((async()=>{await r(a.value)}));const r=async(n=1,r=15)=>{const s=await(async(e=1,t=10)=>{const n=d.gql`
    query getNoteList($page: Int, $size: Int) {
      getNotesWithPager(page: $page, size: $size) {
        data {
          created
          title
          nid
          _id
        }
        pager {
          hasNextPage
          hasPrevPage
          totalPage
        }
      }
    }
  `,a=await W.request(n,{page:e,size:t});return{data:a.getNotesWithPager.data,pager:a.getNotesWithPager.pager}})(n,r);t.notes=s.data,t.pager=s.pager,e.value=!1,a.value=n};return()=>i(M,null,i(G,{notes:t.notes}),!e.value&&i("div",{class:"pager"},i("div",{class:w("prev",!t.pager.hasPrevPage&&"disable"),onClick:()=>{if(!t.pager.hasPrevPage)return;const e=a.value-1;r(e),U.push({path:"/",query:{page:e}})}},"上一页"),i("div",{class:w("next",!t.pager.hasNextPage&&"disable"),onClick:()=>{if(!t.pager.hasNextPage)return;const e=a.value+1;r(e),U.push({path:"/",query:{page:e}})}},"下一页")))}});const B=e({setup:()=>()=>i(M,null,i("article",{class:"page-wrapper"},i("h1",null,"This Site."),i("p",null,"Powered by Vue 3 & Vite"),i("p",null,"GraphQL supported."),i("h1",null,"And me.."),i("p",null,"Third-year undergrad"),i("p",null,"Wenzhou University of Technology"),i("p",null,"TypeScript, NodeJS"),i("p",null,"NestJS, NextJS, NuxtJS, React, Vue"),i("p",null,i("a",{href:"http://github.com/innei",target:"_blank",rel:"noopener noreferrer"},"GitHub"),i("a",{href:"http://innei.ren/feed",target:"_blank",rel:"noopener noreferrer"},"RSS")),i("blockquote",{class:"mt-12"},i("p",null,"幻なんかじゃない"),i("p",null,"人生は夢じゃない"),i("p",null,"僕達ははっきりと生きてるんだ"),i("p",null,"夕焼け空は赤い 炎のように赤い "),i("p",null,"この星の半分を真っ赤に染めた"),i("p",null,"それよりももっと赤い血が"),i("p",null,"体中を流れてるんだぜ"))))}),Y=new k,K=[{name:"root",path:"/",component:()=>function(e,t){if(!t)return e();if(void 0===z){const e=document.createElement("link").relList;z=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in O)return;O[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":z,t||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),t?new Promise(((e,t)=>{a.addEventListener("load",e),a.addEventListener("error",t)})):void 0}))).then((()=>e()))}((()=>Promise.resolve().then((function(){return T}))),void 0),children:[{path:"/",component:Q,meta:{title:N+" | "+q,fulltitle:!0},name:"home"},{path:"/notes/:id",props:!0,component:R,meta:{title:""},name:"note"},{path:"/about",component:B,meta:{title:"关于"}}]}],U=S({history:$(),routes:K});U.beforeEach(((e,t,n)=>{Y.start(),t.meta.title&&(document.title=t.meta.fulltitle?t.meta.title:t.meta.title+" | "+N),n()})),U.afterEach((()=>{Y.finish()})),U.onError((()=>{Y.finish()}));_(E).use(U).mount("#app");
