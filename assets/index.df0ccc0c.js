import{d as e,o as t,r as n,c as a,w as r,a as s,K as o,b as l,h as i,R as u,e as p,f as c,g as d,i as h,j as g,u as f,k as m,l as v,m as y,n as x,p as P,q as b,s as w,t as k,v as $,Q as S,x as _,y as N,z as q}from"./vendor.d5c39f4a.js";const I="森",L="寻的碎碎念",z="https://innei.ren",E="https://api.innei.ren/graphql";var T=e({setup(){t((()=>{document.title=`${I} | ${L}`}))}});T.render=function(e,t,i,u,p,c){const d=n("router-view");return s(),a(d,null,{default:r((({Component:e})=>[(s(),a(o,{exclude:["note"]},[(s(),a(l(e)))],1024))])),_:1})};var O=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:T});let C;const D={};const M=e({setup:()=>()=>i("header",{class:"header-wrapper"},i(u,{to:"/"},i("h1",null,I,i("small",null,L))),i("div",{class:"links"},i(u,{to:"/about"},"About"),i("a",{href:z,target:"_blank"},"Website")))}),V=e({setup:()=>()=>{const e=(new Date).getFullYear();return i("a",{href:z},i("footer",{class:"text-text-gray font-serif text-xs pb-6 inline-block"},"Copyright © ",e," Innei. Powered by Vue 3."))}});var W=e({components:{Header:M,Footer:V}});const j={class:"wrap"};W.render=function(e,t,a,r,o,l){const i=n("Header"),u=n("Footer");return s(),p("div",j,[c(i),d("main",null,[h(e.$slots,"default")]),c(u)])};const F=new g.GraphQLClient(E,{});function A(e,t,n){const a=/\((@(\w+\b))\)\s(?!\[.*?\])/.exec(t);if(a){if(n)return!0;try{return e(a[0])({type:"link",url:"https://github.com/"+a[2],children:[{type:"text",value:a[1]}]})}catch{}}}function H(e,t,n){const a=/^\|\|([\s\S]+?)\|\|(?!\|)/.exec(t);if(a){if(n)return!0;try{return e(a[0])({type:"spoiler",value:a[1]})}catch{}}}A.notInLink=!0,A.locator=function(e,t){return e.indexOf("@",t)},H.notInLink=!0,H.locator=function(e,t){return e.indexOf("||",t)};const J={mentions:function(){const e=this.Parser,t=e.prototype.inlineTokenizers,n=e.prototype.inlineMethods;t.mention=A,n.splice(n.indexOf("text"),0,"mention")},spoiler:function(){const e=this.Parser,t=e.prototype.inlineTokenizers,n=e.prototype.inlineMethods;t.spoiler=H,n.splice(n.indexOf("text"),0,"spoiler")}};var R=Object.values(J);const G=f().use(m).use(v).use(R).use(y,{handlers:{spoiler:(e,t)=>e(t,"del",{class:"spoiler"},[{type:"text",value:t.value}])}}),Q=e({name:"note",setup(){const e=w(),t=parseInt(e.params.id),n=x({note:{}});P((async()=>{n.note=await(async e=>{const t=g.gql`
    query getNoteContent($nid: Int) {
      getNoteById(nid: $nid) {
        data {
          title
          created
          modified
          text
          nid
          _id
        }
      }
    }
  `;return(await F.request(t,{nid:e})).getNoteById.data})(t),document.title=n.note.title+" | "+I}));const a=b((()=>{const e=new Date(n.note.created),t=e.getDate(),a=e.getMonth()+1;return`${e.getFullYear()}-${a.toString().padStart(2,"0")}-${t.toString().padStart(2,"0")}`}));return()=>i(W,null,n.note._id&&i("div",{class:"content-wrapper"},i("h1",null,n.note.title),i("div",{class:"time"},a.value),i("article",null,i("h1",{style:{display:"none"}},n.note.title),i("div",{innerHTML:G.processSync(n.note.text).toString()})),i("div",{class:"notice"},"Visit Full version:"," ",i("a",{href:`//innei.ren/notes/${n.note.nid}`,target:"_blank",rel:"noopener noreferrer"},"https://innei.ren/notes/",n.note.nid))))}});const B=e({props:{notes:{type:Array,required:!0,default:[]}},setup:e=>()=>i("ul",{class:"list-root"},e.notes.map((e=>{const t=new Date(e.created),n=t.getDate(),a=t.getMonth()+1;return i("li",{key:e._id},i(u,{to:`/notes/${e.nid}`},i("span",{class:"title"},e.title),i("span",{class:"created"},`${a}/${n}`)))})))});const Y=e({setup(){const e=k(!0),t=x({notes:[],pager:{hasNextPage:!1,hasPrevPage:!1,totalPage:1}}),n=w(),a=k(parseInt(n.query.page)||1);P((async()=>{await r(a.value)}));const r=async(n=1,r=15)=>{const s=await(async(e=1,t=10)=>{const n=g.gql`
    query getNoteList($page: Int, $size: Int) {
      getNotesWithPager(page: $page, size: $size) {
        data {
          created
          title
          nid
          _id
        }
        pager {
          hasNextPage
          hasPrevPage
          totalPage
        }
      }
    }
  `,a=await F.request(n,{page:e,size:t});return{data:a.getNotesWithPager.data,pager:a.getNotesWithPager.pager}})(n,r);t.notes=s.data,t.pager=s.pager,e.value=!1,a.value=n};return()=>i(W,null,i(B,{notes:t.notes}),!e.value&&i("div",{class:"pager"},i("div",{class:$("prev",!t.pager.hasPrevPage&&"disable"),onClick:()=>{if(!t.pager.hasPrevPage)return;const e=a.value-1;r(e),Z.push({path:"/",query:{page:e}})}},"上一页"),i("div",{class:$("next",!t.pager.hasNextPage&&"disable"),onClick:()=>{if(!t.pager.hasNextPage)return;const e=a.value+1;r(e),Z.push({path:"/",query:{page:e}})}},"下一页")))}});const K=e({setup:()=>()=>i(W,null,i("article",{class:"page-wrapper"},i("h1",null,"This Site."),i("p",null,"Powered by Vue 3 & Vite"),i("p",null,"GraphQL supported."),i("h1",null,"And me.."),i("p",null,"Third-year undergrad"),i("p",null,"Wenzhou University of Technology"),i("p",null,"TypeScript, NodeJS"),i("p",null,"NestJS, NextJS, NuxtJS, React, Vue"),i("p",null,i("a",{href:"http://github.com/innei",target:"_blank",rel:"noopener noreferrer"},"GitHub"),i("a",{href:"http://innei.ren/feed",target:"_blank",rel:"noopener noreferrer"},"RSS")),i("blockquote",{class:"mt-12"},i("p",null,"幻なんかじゃない"),i("p",null,"人生は夢じゃない"),i("p",null,"僕達ははっきりと生きてるんだ"),i("p",null,"夕焼け空は赤い 炎のように赤い "),i("p",null,"この星の半分を真っ赤に染めた"),i("p",null,"それよりももっと赤い血が"),i("p",null,"体中を流れてるんだぜ"))))}),U=new S,X=[{name:"root",path:"/",component:()=>function(e,t){if(!t||0===t.length)return e();if(void 0===C){const e=document.createElement("link").relList;C=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if((e=`https://cdn.jsdelivr.net/gh/mx-space/nai-vue@gh-pages/${e}`)in D)return;D[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":C,t||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),t?new Promise(((e,t)=>{a.addEventListener("load",e),a.addEventListener("error",t)})):void 0}))).then((()=>e()))}((()=>Promise.resolve().then((function(){return O}))),void 0),children:[{path:"/",component:Y,meta:{title:I+" | "+L,fulltitle:!0},name:"home"},{path:"/notes/:id",props:!0,component:Q,meta:{title:""},name:"note"},{path:"/about",component:K,meta:{title:"关于"}}]}],Z=_({history:N(),routes:X});Z.beforeEach(((e,t,n)=>{U.start(),t.meta.title&&(document.title=t.meta.fulltitle?t.meta.title:t.meta.title+" | "+I),n()})),Z.afterEach((()=>{U.finish()})),Z.onError((()=>{U.finish()}));q(T).use(Z).mount("#app");
