import{d as e,o as t,r as n,c as a,w as r,a as o,K as s,b as l,e as i,h as p,R as u,f as c,g as d,i as m,j as h,u as g,k as f,l as y,m as v,n as w,p as P,Q as b,q as $,s as x,t as _}from"./vendor.fade4e71.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(n){const a=new URL(e,location),r=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((n,o)=>{const s=new URL(e,a);if(self[t].moduleMap[s])return n(self[t].moduleMap[s]);const l=new Blob([`import * as m from '${s}';`,`${t}.moduleMap['${s}']=m;`],{type:"text/javascript"}),i=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(l),onerror(){o(new Error(`Failed to import: ${e}`)),r(i)},onload(){n(self[t].moduleMap[s]),r(i)}});document.head.appendChild(i)})),self[t].moduleMap={}}}("assets/");const q="森",k="寻的碎碎念",N="https://innei.ren",S="https://api.innei.ren";var L=e({setup(){t((()=>{document.title=`${q} | ${k}`}))}});L.render=function(e,t,i,p,u,c){const d=n("router-view");return o(),a(d,null,{default:r((({Component:e})=>[(o(),a(s,{exclude:["note"]},[(o(),a(l(e)))],1024))])),_:1})};var E=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:L});let I;const R={},C=new i.GraphQLClient(S+"/graphql",{});const M=e({setup:()=>()=>p("header",{class:"header-wrapper"},p(u,{to:"/"},p("h1",null,q,p("small",null,k))),p("div",{class:"links"},p(u,{to:"/about"},"About"),p("a",{href:N,target:"_blank"},"Website")))}),T=e({setup:()=>()=>{const e=(new Date).getFullYear();return p("a",{href:N},p("footer",{class:"text-text-gray font-serif text-xs pb-6 block text-center"},"Copyright © ",e," Innei. Powered by Vue 3."))}});var j=e({components:{Header:M,Footer:T}});const O={class:"wrap"};j.render=function(e,t,a,r,s,l){const i=n("Header"),p=n("Footer");return o(),c("div",O,[d(i),m("main",null,[h(e.$slots,"default")]),d(p)])};const U=e({name:"note",setup(){const e=g(),t=parseInt(e.params.id),n=f({note:{}});return y((()=>{document.title=`${q} | ${k}`})),v((async()=>{n.note=await(async e=>{const t=i.gql`
    query getNoteContent($nid: Int) {
      getNoteById(nid: $nid) {
        data {
          title
          created
          modified
          text
          nid
          id
        }
      }
    }
  `;return(await C.request(t,{nid:e})).getNoteById.data})(t),document.title=n.note.title+" | "+q;const e=await fetch(`https://api.innei.ren/v2/markdown/render/${n.note.id}`,{}),a=await e.text(),r=document.getElementById("html");try{const e=(new DOMParser).parseFromString(a,"text/html"),t=e.querySelector("article");t.querySelector("h1").style.cssText="text-align:center",r.appendChild(t);e.querySelectorAll("style").forEach((e=>{r.prepend(e)}))}catch(o){console.error(o),r.innerHTML="<p>404</p>"}})),()=>p(j,null,n.note.id&&p("div",{id:"html"}))}});const z=e({props:{notes:{type:Array,required:!0,default:[]}},setup:e=>()=>p("ul",{class:"list-root"},e.notes.map((e=>{const t=new Date(e.created),n=t.getDate(),a=t.getMonth()+1;return p("li",{key:e._id},p(u,{to:`/notes/${e.nid}`},p("span",{class:"title"},e.title),p("span",{class:"created"},`${a}/${n}`)))})))});const F=e({setup(){const e=w(!0),t=f({notes:[],pager:{hasNextPage:!1,hasPrevPage:!1,totalPage:1}}),n=g(),a=w(parseInt(n.query.page)||1);v((async()=>{await r(a.value)}));const r=async(n=1,r=15)=>{const o=await(async(e=1,t=10)=>{const n=i.gql`
    query getNoteList($page: Int, $size: Int) {
      getNotesWithPager(page: $page, size: $size) {
        data {
          created
          title
          nid
          id
        }
        pagination {
          hasNextPage
          hasPrevPage
          totalPage
        }
      }
    }
  `,a=await C.request(n,{page:e,size:t});return{data:a.getNotesWithPager.data,pagination:a.getNotesWithPager.pagination}})(n,r);t.notes=o.data,t.pager=o.pagination,e.value=!1,a.value=n};return()=>p(j,null,p(z,{notes:t.notes}),!e.value&&p("div",{class:"pager"},p("div",{class:P("prev",!t.pager.hasPrevPage&&"disable"),onClick:()=>{if(!t.pager.hasPrevPage)return;const e=a.value-1;r(e),B.push({path:"/",query:{page:e}})}},"上一页"),p("div",{class:P("next",!t.pager.hasNextPage&&"disable"),onClick:()=>{if(!t.pager.hasNextPage)return;const e=a.value+1;r(e),B.push({path:"/",query:{page:e}})}},"下一页")))}});const W=e({setup:()=>()=>p(j,null,p("article",{class:"page-wrapper"},p("h1",null,"This Site."),p("p",null,"Powered by Vue 3 & Vite"),p("p",null,"GraphQL supported."),p("h1",null,"And me.."),p("p",null,"Third-year undergrad"),p("p",null,"Wenzhou University of Technology"),p("p",null,"TypeScript, NodeJS"),p("p",null,"NestJS, NextJS, NuxtJS, React, Vue"),p("p",null,p("a",{href:"http://github.com/innei",target:"_blank",rel:"noopener noreferrer"},"GitHub"),p("a",{href:"http://innei.ren/feed",target:"_blank",rel:"noopener noreferrer"},"RSS")),p("blockquote",{class:"mt-12"},p("p",null,"幻なんかじゃない"),p("p",null,"人生は夢じゃない"),p("p",null,"僕達ははっきりと生きてるんだ"),p("p",null,"夕焼け空は赤い 炎のように赤い "),p("p",null,"この星の半分を真っ赤に染めた"),p("p",null,"それよりももっと赤い血が"),p("p",null,"体中を流れてるんだぜ"))))}),A=new b,D=[{name:"root",path:"/",component:()=>function(e,t){if(!t)return e();if(void 0===I){const e=document.createElement("link").relList;I=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in R)return;R[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":I,t||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),t?new Promise(((e,t)=>{a.addEventListener("load",e),a.addEventListener("error",t)})):void 0}))).then((()=>e()))}((()=>Promise.resolve().then((function(){return E}))),void 0),children:[{path:"/",component:F,meta:{title:q+" | "+k,fulltitle:!0},name:"home"},{path:"/notes/:id",props:!0,component:U,meta:{title:""},name:"note"},{path:"/about",component:W,meta:{title:"关于"}}]}],V=$({history:x(),routes:D});V.beforeEach(((e,t,n)=>{A.start(),t.meta.title&&(document.title=t.meta.fulltitle?t.meta.title:t.meta.title+" | "+q),n()})),V.afterEach((()=>{A.finish()})),V.onError((()=>{A.finish()}));var B=V;_(L).use(B).mount("#app");
